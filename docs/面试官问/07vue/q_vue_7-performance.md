# Vue 性能优化相关

## 使用 vue 渲染大量数据时应该怎么优化？说下你的思路！

::: details

渲染大量数据，此时很容易出现卡顿的情况。比如大数据量的表格、树、多项下拉选项等，在处理时需根据不同情况做相应处理：

1. 可以采取分页（或到底部刷新）的方式获取，避免渲染大量数据

2. 使用虚拟列表滚动等解决方案，只渲染视口范围内的数据

3. 若确定数据不需要更新的场景，可以使用`v-once`方式只渲染一次

4. 可以采用懒加载的方式，在用户需要的时候再加载数据，比如 tree 组件子树的懒加载、Table 二级表格当用户点击时再获取数据，级联选择的二级、三级（数据较多时）用户点击后再获取更多数据

5. 更多等待补充

:::

## 如何修改组件样式又不去掉 scoped

::: details

1. 样式穿透，使用 /deep/ , vue3 为 :deep

2. 使用两个 style 标签
   :::

## 了解函数式组件吗？说下使用函数式组件的优势 及 函数式组件原理

::: details

### 函数式组件原理 及 特点

- 函数式组件需要在声明组件是指定 `functional:true`
- `不需要实例化`，所以没有 this,this 通过 render 函数的第二个参数 context 来代替
- `没有生命周期`钩子函数，不能使用计算属性，watch
- `不能通过 $emit 对外暴露事件`，调用事件只能通过 context.listeners.click 的方式调用外部传入的事件
- 因为函数式组件是没有实例化的，所以在外部通过 ref 去引用组件时，`实际引用的是 HTMLElement`
- 函数式组件的 props 可以不用显示声明，所以没有在 props 里面声明的属性都会被自动隐式解析为 prop，而普通组件所有未声明的属性都解析到 $attrs 里面，并自动挂载到组件根元素上面(可以通过 inheritAttrs 属性禁止)

### 函数式组件的优势

1. 由于函数式组件`不需要实例化`，`无状态`，`没有生命周期`，所以**渲染性能**要好于普通组件
2. 函数式组件结构比较简单，代码结构更清晰

### 使用场景

- 一个简单的展示组件，作为容器组件使用 比如 `router-view` 就是一个函数式组件
- “高阶组件”——用于接收一个组件作为参数，返回一个被包装过的组件

:::
